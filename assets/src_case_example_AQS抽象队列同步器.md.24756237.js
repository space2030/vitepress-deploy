import{_ as s,o as n,c as a,a as l}from"./app.2a154df8.js";const d=JSON.parse('{"title":"AQS \u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5B9A\u4E49","slug":"\u5B9A\u4E49"},{"level":2,"title":"\u961F\u5217","slug":"\u961F\u5217"},{"level":3,"title":"\u540C\u6B65\u7B49\u5F85\u961F\u5217","slug":"\u540C\u6B65\u7B49\u5F85\u961F\u5217"},{"level":3,"title":"\u6761\u4EF6\u7B49\u5F85\u961F\u5217","slug":"\u6761\u4EF6\u7B49\u5F85\u961F\u5217"},{"level":2,"title":"\u6F14\u793A","slug":"\u6F14\u793A"},{"level":2,"title":"\u8BF7\u6C42\u9650\u6D41","slug":"\u8BF7\u6C42\u9650\u6D41"},{"level":2,"title":"\u53C2\u8003","slug":"\u53C2\u8003"}],"relativePath":"src/case/example/AQS\u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668.md","lastUpdated":1697524142000}'),p={name:"src/case/example/AQS\u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668.md"},o=l(`<h1 id="aqs-\u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668" tabindex="-1">AQS \u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668 <a class="header-anchor" href="#aqs-\u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668" aria-hidden="true">#</a></h1><h2 id="\u5B9A\u4E49" tabindex="-1">\u5B9A\u4E49 <a class="header-anchor" href="#\u5B9A\u4E49" aria-hidden="true">#</a></h2><ol><li><p>AbstractQueuedSynchronizer\uFF08\u62BD\u8C61\u961F\u5217\u540C\u6B65\u5668\uFF09\u662F\u4E00\u4E2A\u62BD\u8C61\u7C7B</p></li><li><p>AQS\u5B9A\u4E49\u4E86\u4E00\u5957\u591A\u7EBF\u7A0B\u8BBF\u95EE\u5171\u4EAB\u8D44\u6E90\u7684\u540C\u6B65\u5668\u6846\u67B6\uFF0C\u4E5F\u662F\u4E00\u4E2A\u4F9D\u8D56\u4E8E\u72B6\u6001\u7684\u540C\u6B65\u5668\u3002</p></li></ol><div class="tip custom-block"><p class="custom-block-title">AQS\u7279\u6027</p><ul><li>\u963B\u585E\u7B49\u5F85\u961F\u5217\u3002AQS\u5185\u90E8\u662F\u901A\u8FC7\u4E00\u4E2ANode\u7C7B\u6765\u7EC4\u6210\u4E00\u4E2A\u961F\u5217\uFF0C\u4E0D\u7BA1\u662F\u6761\u4EF6\u961F\u5217\u8FD8\u662FCLH\u7B49\u5F85\u961F\u5217\u3002</li><li>\u5171\u4EAB/\u72EC\u5360\u3002\u5728Node\u7C7B\u4E2D\u5B9A\u4E49\u5171\u4EAB\u6A21\u5F0F\u3001\u72EC\u5360\u6A21\u5F0F\uFF1B\u72EC\u5360\u6A21\u5F0F\u4E0B\u53EA\u6709\u4E00\u4E2A\u7EBF\u7A0B\u80FD\u6267\u884C\uFF0C\u6BD4\u5982ReentrantLock\uFF0C\u5171\u4EAB\u6A21\u5F0F\u4E0B\u591A\u4E2A\u7EBF\u7A0B\u540C\u65F6\u6267\u884C\uFF0C\u6BD4\u5982Semaphore\u3001CountDownLatch\u3002</li><li>\u516C\u5E73/\u975E\u516C\u5E73\u3002\u53EF\u8BBE\u7F6E\u516C\u5E73\u7ADE\u4E89\u8D44\u6E90\u8FD8\u662F\u975E\u516C\u5E73\u3002</li><li>\u53EF\u91CD\u5165\u3002\u56E0\u4E3A\u901A\u8FC7state\u6807\u8BB0\u72B6\u6001\u7684\uFF0C\u53EF\u91CD\u590D\u52A0\u9501\u3002</li><li>\u5141\u8BB8\u4E2D\u65AD\u3002AQS\u4E2D\u5224\u65AD\u5F53\u524D\u7EBF\u7A0B\u662F\u5426\u662F\u4E2D\u65AD\u72B6\u6001\u3002</li></ul></div><div class="warning custom-block"><p class="custom-block-title">AQS\u5185\u90E8\u7EF4\u62A4state</p><p>AQS\u5185\u90E8\u5176\u5B9E\u5C31\u662F\u9760\u4E00\u4E2A\u5C5E\u6027\u6210\u5458state\u6765\u7EF4\u62A4\u72B6\u6001\u7684\uFF0C state\u7684\u5B9A\u4E49\u662F\u8FD9\u6837\u7684volatile int state\uFF0C \u901A\u8FC7volatile\u4FEE\u9970\u7684\uFF0C \u786E\u4FDD\u72B6\u6001\u7684\u6539\u53D8\u6BCF\u4E2A\u7EBF\u7A0B\u90FD\u53EF\u4EE5\u53CA\u65F6\u611F\u77E5\u5230state\u503C\u7684\u53D8\u5316\u3002</p><ul><li>state\u8868\u793A\u8D44\u6E90\u7684\u53EF\u7528\u72B6\u6001\uFF0C\u63D0\u4F9B\u4E86\u4E09\u79CD\u8BBF\u95EE\u65B9\u5F0F</li><li>getState()\uFF1A\u83B7\u53D6\u72B6\u6001\u503C\uFF0C\u5982\u679C\u662F0\u5219\u8D44\u6E90\u53EF\u7528\u3002</li><li>setState()\uFF1A\u8BBE\u7F6E\u72B6\u6001\u503C\uFF0C\u76F8\u5F53\u4E8E\u52A0\u9501\u3002</li><li>compareAndSetState()\uFF1A\u6BD4\u8F83\u66FF\u6362\uFF0C\u539F\u5B50\u64CD\u4F5C\u3002</li></ul></div><h2 id="\u961F\u5217" tabindex="-1">\u961F\u5217 <a class="header-anchor" href="#\u961F\u5217" aria-hidden="true">#</a></h2><h3 id="\u540C\u6B65\u7B49\u5F85\u961F\u5217" tabindex="-1">\u540C\u6B65\u7B49\u5F85\u961F\u5217 <a class="header-anchor" href="#\u540C\u6B65\u7B49\u5F85\u961F\u5217" aria-hidden="true">#</a></h3><p>AQS\u4E2D\u7684\u540C\u6B65\u7B49\u5F85\u961F\u5217\u4E5F\u79F0CLH\u961F\u5217\uFF0C CLH\u961F\u5217\u662FCraig\u3001Landing\u3001Hagersten\u4E09\u4E2A\u4EBA\u53D1\u660E\u7684\u57FA\u4E8E\u53CC\u5411\u94FE\u8868\u7ED3\u6784\u7684\u961F\u5217\uFF0C\u662FFIFO\u7B49\u5F85\u961F\u5217\u3002</p><h3 id="\u6761\u4EF6\u7B49\u5F85\u961F\u5217" tabindex="-1">\u6761\u4EF6\u7B49\u5F85\u961F\u5217 <a class="header-anchor" href="#\u6761\u4EF6\u7B49\u5F85\u961F\u5217" aria-hidden="true">#</a></h3><p>Condition\u662F\u4E00\u4E2A\u591A\u7EBF\u7A0B\u95F4\u534F\u8C03\u901A\u4FE1\u7684\u5DE5\u5177\u7C7B\uFF0C \u5728\u67D0\u4E2A\u6216\u8005\u67D0\u4E9B\u7EBF\u7A0B\u4E00\u8D77\u7B49\u5F85\u67D0\u4E2A\u6761\u4EF6\u6210\u7ACB\uFF0C\u53EA\u6709\u8BE5\u6761\u4EF6\u6210\u7ACB\u65F6\uFF0C\u8FD9\u4E9B\u7EBF\u7A0B\u624D\u88AB\u5524\u9192\u91CD\u65B0\u4E89\u593A\u9501\u3002</p><h2 id="\u6F14\u793A" tabindex="-1">\u6F14\u793A <a class="header-anchor" href="#\u6F14\u793A" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">\u9898\u76EE</p><p>\u7528\u4E00\u4E2A\u8FD0\u52A8\u4F1A\u7684\u77ED\u8DD1\u6BD4\u8D5B\u4F5C\u4E3A\u573A\u666F\uFF0C\u7528 CountDownLatch \u6765\u5B9E\u73B0\uFF0C\u4E3B\u8981\u7531\u56DB\u4E2A\u8FD0\u52A8\u5458\u8D5B\u8DD1\uFF0C \u7B49\u88C1\u5224\u4E00\u58F0\u67AA\u54CD\u540E\uFF0C\u56DB\u4E2A\u4EBA\u90FD\u5F00\u59CB\u5168\u529B\u8DD1\uFF0C\u4E0D\u8FC7\u6BD4\u8D5B\u5B8C\u6210\u662F\u9700\u8981\u56DB\u4E2A\u4EBA\u90FD\u8DD1\u5B8C\u624D\u7B97\uFF0C \u4E0D\u80FD\u662F\u8DD1\u5B8C\u4E00\u4E2A\u4EBA\u5C31\u7B97\u6BD4\u8D5B\u7ED3\u675F\uFF08\u9700\u8981\u6BCF\u4E2A\u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u4E3B\u7EBF\u7A0B\u624D\u80FD\u6267\u884C\uFF09\u3002</p></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#8B949E;">//\u5B9E\u4F8B\u5316 CountDownLatch, \u7EBF\u7A0B\u6570\u91CF\u4E3A 4</span></span>
<span class="line"><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> CountDownLatch</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">latch</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">CountDownLatch</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">4</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] args) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u5F00\u59CB\u51C6\u5907\u8D5B\u8DD1\uFF0C\u6240\u6709\u53C2\u8D5B\u8005\u51C6\u5907&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Thread</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            Thread.</span><span style="color:#D2A8FF;">sleep</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2000</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            latch.</span><span style="color:#D2A8FF;">countDown</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (InterruptedException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            e.</span><span style="color:#D2A8FF;">printStackTrace</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u4E00\u4E2A\u4EBA\u8DD1\u5B8C\u4E86\uFF0C\u4E00\u7247\u6B22\u547C\u58F0~~~~~~~~~~~&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }).</span><span style="color:#D2A8FF;">start</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">print</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u4E00\u4E2A\u4EBA\u51C6\u5907\u597D\u4E86|&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Thread</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            Thread.</span><span style="color:#D2A8FF;">sleep</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">4000</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            latch.</span><span style="color:#D2A8FF;">countDown</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (InterruptedException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            e.</span><span style="color:#D2A8FF;">printStackTrace</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u4E8C\u4E2A\u4EBA\u8DD1\u5B8C\u4E86\uFF0C\u597D\u591A\u4EBA\u9F13\u638C~~~~~~~~~~~&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }).</span><span style="color:#D2A8FF;">start</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">print</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u4E8C\u4E2A\u4EBA\u51C6\u5907\u597D\u4E86|&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Thread</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            Thread.</span><span style="color:#D2A8FF;">sleep</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">5000</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            latch.</span><span style="color:#D2A8FF;">countDown</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (InterruptedException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            e.</span><span style="color:#D2A8FF;">printStackTrace</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u4E09\u4E2A\u4EBA\u8DD1\u5B8C\u4E86\uFF0C\u6CA1\u51E0\u4E2A\u4EBA\u9F13\u638C~~~~~~~~~~~&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }).</span><span style="color:#D2A8FF;">start</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">print</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u4E09\u4E2A\u4EBA\u51C6\u5907\u597D\u4E86|&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Thread</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            Thread.</span><span style="color:#D2A8FF;">sleep</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">7000</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            latch.</span><span style="color:#D2A8FF;">countDown</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (InterruptedException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            e.</span><span style="color:#D2A8FF;">printStackTrace</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u56DB\u4E2A\u4EBA\u8DD1\u5B8C\u4E86~~~~~~~~~~~&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }).</span><span style="color:#D2A8FF;">start</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u7B2C\u56DB\u4E2A\u4EBA\u51C6\u5907\u597D\u4E86&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u53D1\u4EE4\u67AA~~~~pong...&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u88C1\u5224\u5458\u5728\u7B49\u5F85\u7740...&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        latch.</span><span style="color:#D2A8FF;">await</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (InterruptedException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        e.</span><span style="color:#D2A8FF;">printStackTrace</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\u8D5B\u8DD1\u9879\u76EE\u7ED3\u675F\u4E86\u3002&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">\u6267\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#c9d1d9;">\u5F00\u59CB\u51C6\u5907\u8D5B\u8DD1\uFF0C\u6240\u6709\u53C2\u8D5B\u8005\u51C6\u5907</span></span>
<span class="line"><span style="color:#c9d1d9;">\u7B2C\u4E00\u4E2A\u4EBA\u5F00\u59CB\u8DD1\u4E86|\u7B2C\u4E8C\u4E2A\u4EBA\u5F00\u59CB\u8DD1\u4E86|\u7B2C\u4E09\u4E2A\u4EBA\u5F00\u59CB\u8DD1\u4E86|\u7B2C\u56DB\u4E2A\u4EBA\u5F00\u59CB\u8DD1\u4E86</span></span>
<span class="line"><span style="color:#c9d1d9;">\u53D1\u4EE4\u67AA~~~~pong...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u88C1\u5224\u5458\u5728\u7B49\u5F85\u7740...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u7B2C\u4E00\u4E2A\u4EBA\u8DD1\u5B8C\u4E86\uFF0C\u4E00\u7247\u6B22\u547C\u58F0~~~~~~~~~~~</span></span>
<span class="line"><span style="color:#c9d1d9;">\u7B2C\u4E8C\u4E2A\u4EBA\u8DD1\u5B8C\u4E86\uFF0C\u597D\u591A\u4EBA\u9F13\u638C~~~~~~~~~~~</span></span>
<span class="line"><span style="color:#c9d1d9;">\u7B2C\u4E09\u4E2A\u4EBA\u8DD1\u5B8C\u4E86\uFF0C\u6CA1\u51E0\u4E2A\u4EBA\u9F13\u638C~~~~~~~~~~~</span></span>
<span class="line"><span style="color:#c9d1d9;">\u7B2C\u56DB\u4E2A\u4EBA\u8DD1\u5B8C\u4E86~~~~~~~~~~~</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8D5B\u8DD1\u9879\u76EE\u7ED3\u675F\u4E86\u3002</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre></div><p>\u4ECE\u6267\u884C\u7ED3\u679C\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u56DB\u4E2A\u4EBA\u5168\u90E8\u8DD1\u5B8C \u8D5B\u8DD1\u9879\u76EE\u624D\u7ED3\u675F\uFF0C\u4E5F\u5C31\u662F 4 \u4E2A\u7EBF\u7A0B\u90FD\u6267\u884C\u5B8C\u4E4B\u540E\uFF0C\u624D\u56DE\u5230\u4E3B\u7EBF\u7A0B\u6267\u884C\u3002</p></div><h2 id="\u8BF7\u6C42\u9650\u6D41" tabindex="-1">\u8BF7\u6C42\u9650\u6D41 <a class="header-anchor" href="#\u8BF7\u6C42\u9650\u6D41" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">\u7528\u4E00\u4E2A\u8BF7\u6C42\u9650\u6D41\u7684\u573A\u666F\uFF0C\u7528 Semaphore \u6765\u6A21\u62DF\u8FD9\u4E2A\u573A\u666F\u5B9E\u73B0\u3002</p><p>\u9996\u5148\u5B9E\u4F8B\u5316\u4E00\u4E2ASemaphore\u4FE1\u53F7\u91CF \u662F 3\uFF0C\u8868\u793A\u6BCF\u6B21\u53EA\u80FD\u67093 \u4E2A\u7EBF\u7A0B\u6267\u884C\u4EFB\u52A1\uFF0C \u7528\u4E00\u4E2A \u5185\u90E8\u7C7B RequestTask \u6765\u6A21\u62DF\u8BF7\u6C42\uFF0C\u6BCF\u6B21\u8BF7\u6C42\u8017\u65F6 2 \u79D2\u3002</p></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] args) {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">//\u521D\u59CB\u5316\u4FE1\u53F7\u91CF\u4E3A 3\uFF0C\u6BCF\u6B21\u53EA\u67093\u4E2A\u7EBF\u7A0B\u6267\u884C</span></span>
<span class="line"><span style="color:#C9D1D9;">    Semaphore</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">semaphore</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Semaphore</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">3</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">for</span><span style="color:#C9D1D9;"> (</span><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">i</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">; i </span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">10</span><span style="color:#C9D1D9;">; i</span><span style="color:#FF7B72;">++</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Thread</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">RequestTask</span><span style="color:#C9D1D9;">(semaphore, </span><span style="color:#A5D6FF;">&quot;\u8BF7\u6C42\u4EFB\u52A1&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> i)).</span><span style="color:#D2A8FF;">start</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">RequestTask</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Runnable</span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    Semaphore</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">semaphore;</span></span>
<span class="line"><span style="color:#C9D1D9;">    String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">taskName;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">RequestTask</span><span style="color:#C9D1D9;">(Semaphore </span><span style="color:#FFA657;">semaphore</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">taskName</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.semaphore </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> semaphore;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.taskName </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> taskName;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">run</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            semaphore.</span><span style="color:#D2A8FF;">acquire</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">            System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(taskName </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;\u4EFB\u52A1\u6267\u884C\u4E2D...&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            TimeUnit.SECONDS.</span><span style="color:#D2A8FF;">sleep</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            System.out.</span><span style="color:#D2A8FF;">println</span><span style="color:#C9D1D9;">(taskName </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">            semaphore.</span><span style="color:#D2A8FF;">release</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (InterruptedException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            e.</span><span style="color:#D2A8FF;">printStackTrace</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">\u6267\u884C\u7ED3\u679C</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A11\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A12\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A10\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A12\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A10\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A11\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A14\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A15\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A13\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A13\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A15\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A14\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A17\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A16\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A18\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A16\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A17\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A19\u4EFB\u52A1\u6267\u884C\u4E2D...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A18\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;">\u8BF7\u6C42\u4EFB\u52A19\u4EFB\u52A1\u6267\u884C\u5B8C\u6210...</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre></div><p>\u4ECE\u6267\u884C\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF0C\u603B\u5171 10 \u4E2A\u7EBF\u7A0B\uFF0C\u6BCF\u6B21\u53EA\u6709 3 \u4E2A\u7EBF\u7A0B\u6267\u884C\uFF0C\u6700\u540E\u4E00\u4E2A\u65F6 \u4EFB\u52A19 \u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6BCF\u6B21\u662F\u6700\u591A\u6709 3 \u4E2A\u7EBF\u7A0B\u6267\u884C\u3002</p></div><h2 id="\u53C2\u8003" tabindex="-1">\u53C2\u8003 <a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a></h2><p><a href="https://blog.csdn.net/qq_19283249/article/details/128589797" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_19283249/article/details/128589797</a></p>`,20),e=[o];function t(c,r,D,y,F,i){return n(),a("div",null,e)}var u=s(p,[["render",t]]);export{d as __pageData,u as default};
