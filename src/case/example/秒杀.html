<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>秒杀</title>
    <meta name="description" content="VitePress">
    <link rel="stylesheet" href="/vitepress-deploy/assets/style.c6a8f29c.css">
    <link rel="modulepreload" href="/vitepress-deploy/assets/app.2a154df8.js">
    <link rel="modulepreload" href="/vitepress-deploy/assets/src_case_example_秒杀.md.fcad5d18.lean.js">
    
    <link rel="icon" href="https://cn.vitejs.dev/logo-with-shadow.png">
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-581d5782><!--[--><!--]--><!--[--><span tabindex="-1" data-v-2c02b834></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2c02b834> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-581d5782 data-v-119e663c><div class="VPNavBar" data-v-119e663c data-v-1f7b674d><div class="container" data-v-1f7b674d><div class="VPNavBarTitle" data-v-1f7b674d data-v-ed531ba2><a class="title" href="/vitepress-deploy/" data-v-ed531ba2><!--[--><img class="VPImage logo" src="https://cn.vitejs.dev/logo-with-shadow.png" data-v-81172f9c><!--]--><!--[-->首页<!--]--></a></div><div class="content" data-v-1f7b674d><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1f7b674d data-v-192c109a><span id="main-nav-aria-label" class="visually-hidden" data-v-192c109a>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-deploy/src/view/index.html" data-v-192c109a data-v-4d31877c data-v-8dd034e6><!--[-->问答<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-deploy/src/web/index.html" data-v-192c109a data-v-4d31877c data-v-8dd034e6><!--[-->前端<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-deploy/src/deploy/index.html" data-v-192c109a data-v-4d31877c data-v-8dd034e6><!--[-->部署<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-deploy/src/kit/index.html" data-v-192c109a data-v-4d31877c data-v-8dd034e6><!--[-->工具<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-deploy/src/case/index.html" data-v-192c109a data-v-4d31877c data-v-8dd034e6><!--[-->案例<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1f7b674d data-v-5cf7609e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-5cf7609e data-v-766c3cb1 data-v-d6dfd774><span class="check" data-v-d6dfd774><span class="icon" data-v-d6dfd774><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-766c3cb1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-766c3cb1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1f7b674d data-v-a767cbbe data-v-e03f590e><!--[--><a class="VPSocialLink" href="https://github.com/space2030?tab=repositories" title="github" target="_blank" rel="noopener noreferrer" data-v-e03f590e data-v-3dd9970c><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-3dd9970c><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-3dd9970c>github</span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1f7b674d data-v-6a32f7d6 data-v-44cec2e6><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-44cec2e6><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-44cec2e6><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-44cec2e6><div class="VPMenu" data-v-44cec2e6 data-v-ddb22576><!----><!--[--><!--[--><!----><div class="group" data-v-6a32f7d6><div class="item appearance" data-v-6a32f7d6><p class="label" data-v-6a32f7d6>Appearance</p><div class="appearance-action" data-v-6a32f7d6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-6a32f7d6 data-v-766c3cb1 data-v-d6dfd774><span class="check" data-v-d6dfd774><span class="icon" data-v-d6dfd774><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-766c3cb1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-766c3cb1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-6a32f7d6><div class="item social-links" data-v-6a32f7d6><div class="VPSocialLinks social-links-list" data-v-6a32f7d6 data-v-e03f590e><!--[--><a class="VPSocialLink" href="https://github.com/space2030?tab=repositories" title="github" target="_blank" rel="noopener noreferrer" data-v-e03f590e data-v-3dd9970c><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-3dd9970c><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-3dd9970c>github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1f7b674d data-v-3524c702><span class="container" data-v-3524c702><span class="top" data-v-3524c702></span><span class="middle" data-v-3524c702></span><span class="bottom" data-v-3524c702></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-581d5782 data-v-804f35da><div class="VPDoc" data-v-804f35da data-v-3886f8ec><div class="container" data-v-3886f8ec><div class="aside" data-v-3886f8ec><div class="aside-curtain" data-v-3886f8ec></div><div class="aside-container" data-v-3886f8ec><div class="aside-content" data-v-3886f8ec><div class="VPDocAside" data-v-3886f8ec data-v-a4f49d12><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-a4f49d12 data-v-2d325df8><div class="content" data-v-2d325df8><div class="outline-marker" data-v-2d325df8></div><div class="outline-title" data-v-2d325df8>目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-2d325df8><span class="visually-hidden" id="doc-outline-aria-label" data-v-2d325df8> Table of Contents for current page </span><ul class="root" data-v-2d325df8><!--[--><li style="" data-v-2d325df8><a class="outline-link" href="#_01-如何处理超卖问题" data-v-2d325df8>01 如何处理超卖问题</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_02-如何解决重复下单问题" data-v-2d325df8>02 如何解决重复下单问题</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_03-热点数据失效（缓存击穿）问题如何解决" data-v-2d325df8>03 热点数据失效（缓存击穿）问题如何解决</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_04-缓存和数据库数据一致性如何保证" data-v-2d325df8>04 缓存和数据库数据一致性如何保证</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_05-减库存成功了，但是生成订单失败了，怎么处理" data-v-2d325df8>05 减库存成功了，但是生成订单失败了，怎么处理</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_06-限流削峰的措施" data-v-2d325df8>06 限流削峰的措施</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_07-客户恶意下单问题" data-v-2d325df8>07 客户恶意下单问题</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_08-多机器扣减库存，如何保证它的线程安全" data-v-2d325df8>08 多机器扣减库存，如何保证它的线程安全</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_09-如何去减redis中的库存" data-v-2d325df8>09 如何去减Redis中的库存</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_10-缓存中的数据突然失效，导致请求全部打到了数据库，如何解决" data-v-2d325df8>10 缓存中的数据突然失效，导致请求全部打到了数据库，如何解决</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_11-如果项目中的redis挂掉，如何减轻数据库的压力" data-v-2d325df8>11 如果项目中的Redis挂掉，如何减轻数据库的压力</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_12-页面静态化" data-v-2d325df8>12 页面静态化</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_13-秒杀系统面临的问题" data-v-2d325df8>13 秒杀系统面临的问题</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_14-秒杀系统设计" data-v-2d325df8>14 秒杀系统设计</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_15-分布式会话" data-v-2d325df8>15 分布式会话</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_16-线程池的执行过程" data-v-2d325df8>16 线程池的执行过程</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_17-项目难点" data-v-2d325df8>17 项目难点</a><!----></li><li style="" data-v-2d325df8><a class="outline-link" href="#_18-总结" data-v-2d325df8>18 总结</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-a4f49d12></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-3886f8ec><div class="content-container" data-v-3886f8ec><!--[--><!--]--><main class="main" data-v-3886f8ec><div style="position:relative;" class="vp-doc _vitepress-deploy_src_case_example_%E7%A7%92%E6%9D%80" data-v-3886f8ec><div><h1 id="秒杀" tabindex="-1">秒杀 <a class="header-anchor" href="#秒杀" aria-hidden="true">#</a></h1><h2 id="_01-如何处理超卖问题" tabindex="-1">01 如何处理超卖问题 <a class="header-anchor" href="#_01-如何处理超卖问题" aria-hidden="true">#</a></h2><p>直接由数据库操作库存的sql语句如下所示。依靠mysql中排他锁实现</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#c9d1d9;">update table_prmo set num = num -1 where id = 1001 and num &gt; 0</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">利用redis的单线程特性预减库存处理秒杀超卖问题</p><ol><li>在系统初始化时，将商品以及对应的库存数量预先加载到redis缓存中（缓存预热）</li><li>接收到秒杀请求时，在redis中进行预减库存（decrement）,当redis中的库存不足时，直接返回秒杀失败，否则继续进行第3步；</li><li>将请求放入异步队列中，返回正在排队中；</li><li>服务端异步队列（MQ）将请求出队，出队成功的请求可以生成秒杀订单，减少数据库库存，返回秒杀订单详情。</li></ol></div><h2 id="_02-如何解决重复下单问题" tabindex="-1">02 如何解决重复下单问题 <a class="header-anchor" href="#_02-如何解决重复下单问题" aria-hidden="true">#</a></h2><p>mysql唯一索引（商品索引） + 分布式锁</p><h2 id="_03-热点数据失效（缓存击穿）问题如何解决" tabindex="-1">03 热点数据失效（缓存击穿）问题如何解决 <a class="header-anchor" href="#_03-热点数据失效（缓存击穿）问题如何解决" aria-hidden="true">#</a></h2><p>设置热点数据永不过期</p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"></span>
<span class="line"><span style="color:#8B949E;"># QPS 一秒内可以处理的请求数量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">假设一个服务的 RT(Response time) 是 20ms，则 QPS 为 50（单机）</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><ul><li>并发问题</li></ul><div class="danger custom-block"><p class="custom-block-title">悲观锁</p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#8B949E;"># 悲观锁</span></span>
<span class="line"><span style="color:#FF7B72;">select</span><span style="color:#C9D1D9;"> * from stock where product_id = xxx </span><span style="color:#FF7B72;">for</span><span style="color:#C9D1D9;"> update</span><span style="color:#FF7B72;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">update stock </span><span style="color:#79C0FF;">set</span><span style="color:#C9D1D9;"> count = count - 1 where product_id = xxx and count </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> 0 </span><span style="color:#FF7B72;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></div><div class="tip custom-block"><p class="custom-block-title">乐观锁</p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#C9D1D9;">update </span></span>
<span class="line"><span style="color:#C9D1D9;">stock </span></span>
<span class="line"><span style="color:#79C0FF;">set</span><span style="color:#C9D1D9;"> count = count - 1 and version = version + 1 </span></span>
<span class="line"><span style="color:#C9D1D9;">where product_id = xxx and count </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> 0  and version = xxx</span></span>
<span class="line"></span></code></pre></div></div><ul><li>秒杀倒计时</li></ul><ol><li>前端页面第一次从服务端获取活动开始时间，服务端当前时间，然后，在客户端计算倒计时</li><li>最后提交订单时，服务端再次校验客户端和服务端当前时间。</li></ol><ul><li><p>下单减库存或者支付减库存 下单锁定库存，支付减库存</p></li><li><p>防止超卖</p></li></ul><p>把库存数据放入到缓存中，利用缓存的原子特性保证同时只有一个线程操作库存</p><ul><li>库存写回数据库的时机</li></ul><p>定时任务同步 redis 的数据写回数据库</p><ul><li><p>刷爆页面如何处理 把页面做静态化处理，页面放在静态服务器 （CDN）</p></li><li><p>大量请求，爬虫问题</p></li></ul><p>增加页面访问验证码、增加 IP 黑名单</p><ul><li>秒杀服务器挂了，如何不影响正常购买</li></ul><p>采用熔断的方式</p><div class="tip custom-block"><p class="custom-block-title">熔断</p><ol><li>熔断是指超过了某个保护阈值情况下，系统做出的保护措施</li><li>熔断往往指某个服务超过了既定压力阈值情况下做到的 <strong>快速失败</strong> 处理</li></ol></div><ul><li>短时间频繁调用接口下单</li></ul><p>采用限流器</p><ul><li>非购物关键路径服务降级</li></ul><p>查看评论、每一页评论数/历史订单数</p><ul><li>秒杀系统和订票系统的主要差异 <strong>库存维度的差异</strong></li></ul><h2 id="_04-缓存和数据库数据一致性如何保证" tabindex="-1">04 缓存和数据库数据一致性如何保证 <a class="header-anchor" href="#_04-缓存和数据库数据一致性如何保证" aria-hidden="true">#</a></h2><ul><li>使用canal组件实现（canal的原理，模拟mysql的主从复制机制）</li><li>更新数据库后立即删缓存，然后下一次查缓存找不到数据后会再次从数据库同步到缓存</li></ul><h2 id="_05-减库存成功了，但是生成订单失败了，怎么处理" tabindex="-1">05 减库存成功了，但是生成订单失败了，怎么处理 <a class="header-anchor" href="#_05-减库存成功了，但是生成订单失败了，怎么处理" aria-hidden="true">#</a></h2><ol><li><p>非分布式的系统中使用Spring提供事务功能即可</p></li><li><p>分布式事务：将减库存与生成订单操作组合为一个事务，要么一起成功，要么一起失败。</p></li></ol><div class="tip custom-block"><p class="custom-block-title">CPA理论（只能保证CP、AP）、BASE理论（最终一致性，基本可用性，柔性事务）</p><p>分布式事务的两个协议以及几种解决方案</p><ul><li>全局消息</li><li>基于可靠消息（MQ）的分布式事务</li><li>TCC</li><li>最大努力通知</li><li>seata分布式事务控制组件</li></ul></div><h2 id="_06-限流削峰的措施" tabindex="-1">06 限流削峰的措施 <a class="header-anchor" href="#_06-限流削峰的措施" aria-hidden="true">#</a></h2><p>秒杀令牌（token）加秒杀大闸限制入口流量，线程池技术限制瞬时并发数，验证码做防刷功能。</p><h2 id="_07-客户恶意下单问题" tabindex="-1">07 客户恶意下单问题 <a class="header-anchor" href="#_07-客户恶意下单问题" aria-hidden="true">#</a></h2><p>封IP，nginx中有一个设置，单个IP访问频率和次数多了之后有一个拉黑操作。</p><h2 id="_08-多机器扣减库存，如何保证它的线程安全" tabindex="-1">08 多机器扣减库存，如何保证它的线程安全 <a class="header-anchor" href="#_08-多机器扣减库存，如何保证它的线程安全" aria-hidden="true">#</a></h2><p>分布式锁。redission客户端实现分布式锁。</p><h2 id="_09-如何去减redis中的库存" tabindex="-1">09 如何去减Redis中的库存 <a class="header-anchor" href="#_09-如何去减redis中的库存" aria-hidden="true">#</a></h2><p>decrement API减库存，increment API增库存，以上的指令都是原子性的。</p><h2 id="_10-缓存中的数据突然失效，导致请求全部打到了数据库，如何解决" tabindex="-1">10 缓存中的数据突然失效，导致请求全部打到了数据库，如何解决 <a class="header-anchor" href="#_10-缓存中的数据突然失效，导致请求全部打到了数据库，如何解决" aria-hidden="true">#</a></h2><p>典型的缓存雪崩问题，给缓存中的数据的过期时间加随机数</p><h2 id="_11-如果项目中的redis挂掉，如何减轻数据库的压力" tabindex="-1">11 如果项目中的Redis挂掉，如何减轻数据库的压力 <a class="header-anchor" href="#_11-如果项目中的redis挂掉，如何减轻数据库的压力" aria-hidden="true">#</a></h2><p>redis集群，主从模式、哨兵模式、集群模式</p><div class="tip custom-block"><p class="custom-block-title">主从模式：</p><p>如果主机宕机，使用slave of no one断开主从关系把从机升级为主机</p></div><div class="tip custom-block"><p class="custom-block-title">哨兵模式：</p><ol><li>自动监控master / slave的运行状态，基本原理：心跳机制+投票裁决。 每个sentinel会向其它sentinel、master、slave定时发送消息。</li><li>哨兵定期给主或者从和slave发送ping包（IP：port），正常则响应pong，ping和pong就叫心跳机制， <ul><li>以确认对方是否“活着”，如果发现对方在指定时间（可配置）内未回应，</li><li>则暂时认为对方已挂（所谓的“主观认为宕机”Subjective Down，简称SDOWN）。</li><li>若master被判断死亡之后，通过选举算法，从剩下的slave节点中选一台升级为master。并自动修改相关配置。</li></ul></li></ol></div><h2 id="_12-页面静态化" tabindex="-1">12 页面静态化 <a class="header-anchor" href="#_12-页面静态化" aria-hidden="true">#</a></h2><p>把能提前放入cdn服务器的东西都放进去，反正把所有能提升效率的步骤都做一下，减少真正秒杀时候服务器的压力。</p><h2 id="_13-秒杀系统面临的问题" tabindex="-1">13 秒杀系统面临的问题 <a class="header-anchor" href="#_13-秒杀系统面临的问题" aria-hidden="true">#</a></h2><ul><li>高并发</li><li>超卖、重复卖问题</li><li>脚本恶意请求</li><li>数据库扛不住</li><li>加了缓存之后的缓存三大问题（击穿、穿透、雪崩）</li></ul><h2 id="_14-秒杀系统设计" tabindex="-1">14 秒杀系统设计 <a class="header-anchor" href="#_14-秒杀系统设计" aria-hidden="true">#</a></h2><ol start="19"><li>nginx做一个动静分离以及负载均衡</li><li>redis缓存预热、预减库存</li><li>MQ异步下单</li></ol><h2 id="_15-分布式会话" tabindex="-1">15 分布式会话 <a class="header-anchor" href="#_15-分布式会话" aria-hidden="true">#</a></h2><blockquote><p>token + redis解决分布式会话问题</p></blockquote><p>Token是服务端生成的一串字符串，作为客户端进行请求的一个令牌，当第一次登录后，服务器生成一个userToken，便将此Token返回给客户端，存入cookie中保存，以后客户端只需带上这个userToken前来请求数据即可，无需再次带上用户名和密码。二次登录时，只需要去redis中获取对应token的value验证用户形象即可</p><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#c9d1d9;">// 用户第一次登录时，经过相关信息的验证后将对应的登录信息以及凭证（token）存入redis中</span></span>
<span class="line"><span style="color:#c9d1d9;">String uuid = UUID.rondom().toString();</span></span>
<span class="line"><span style="color:#c9d1d9;">redisTemplate.opsForValue().set(uuid, userModel);</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// token下发到客户端存入cookie中进行保存</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// 再次登录时cookie携带着token到redis中找到对应的value不为空，表示该用户已经登陆过了，如果查询结果为空，</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// 则让该用户重新登陆，然后将用户信息保存到redis中。</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// 一般设置一个过期时间，表示的就是多久后用户的登录态就失效了</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre></div><h2 id="_16-线程池的执行过程" tabindex="-1">16 线程池的执行过程 <a class="header-anchor" href="#_16-线程池的执行过程" aria-hidden="true">#</a></h2><p>核心参数：</p><ul><li>corePoolSize：线程池核心线程数最大值</li><li>maximumPoolSize：线程池最大线程数大小</li><li>keepAliveTime：线程池中非核心线程空闲的存活时间大小</li><li>unit：线程空闲存活时间的单位</li><li>workQueue：存放任务的阻塞队列</li><li>threadFactory：用于设置创建线程的工厂，可以给创建的线程设置有意义的名字，可方便排查问题</li><li>handler：线程池的饱和策略事件，主要有四种类型</li></ul><div class="tip custom-block"><p class="custom-block-title">执行过程：</p><p>一个任务进来，先判断当前线程池中的核心线程数是否小于corePoolSize。小于的话会直接创建一个核心线程去提交业务，如果核心线程数达到限制，那么接下来的任务会被放入阻塞队列中排队等待执行。 当核心线程数达到限制且阻塞队列已满，开始创建非核心线程来执行阻塞队列中的业务，当线程数达到了maximumPoolSize且阻塞队列已满。那么会采用拒绝策略处理后来的业务。</p></div><h2 id="_17-项目难点" tabindex="-1">17 项目难点 <a class="header-anchor" href="#_17-项目难点" aria-hidden="true">#</a></h2><p>限流、削峰部分的设计 用户的登录的问题（分布式会话）</p><div class="tip custom-block"><p class="custom-block-title">入口大流量限制</p><ul><li>例如有10w用户来抢10件商品，我们只放100个用户进来。</li><li>采取发放令牌机制（控制流量），根据商品id和一串uuid产生一个令牌存入redis中同时引入了秒杀大闸，目的是流量控制，比如当前活动商品只有100件，我们就发放500个令牌，秒杀前会先发放令牌，令牌发放完则把后来的用户挡在这一层之外，控制了流量。</li><li>获取令牌后会对比redis中用户产生的令牌，对比成功才可以购买商品。</li></ul><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#8B949E;">// 设置秒杀大闸</span></span>
<span class="line"><span style="color:#C9D1D9;">redisTemplate.</span><span style="color:#D2A8FF;">opsForValue</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">set</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;door_count&quot;</span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;">promoId, itemModel.</span><span style="color:#D2A8FF;">getStock</span><span style="color:#C9D1D9;">()</span><span style="color:#FF7B72;">*</span><span style="color:#79C0FF;">5</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#8B949E;">// 发放令牌时，先去redis获取当前大闸剩余令牌数</span></span>
<span class="line"><span style="color:#FF7B72;">int</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">dazha</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> redisTemplate.</span><span style="color:#D2A8FF;">opForValue</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">get</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;door_count&quot;</span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;">promoId);</span></span>
<span class="line"><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (dazha </span><span style="color:#FF7B72;">&lt;=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// 抛出一个异常</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">throw</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> exception;</span></span>
<span class="line"><span style="color:#C9D1D9;">} </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">token</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> UUIDUtils.</span><span style="color:#D2A8FF;">getUUID</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> promoId;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// 用户只有拥有这个token才有资格下单</span></span>
<span class="line"><span style="color:#C9D1D9;">    redisTemplate.</span><span style="color:#D2A8FF;">opsForValue</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">set</span><span style="color:#C9D1D9;">(userToken, token);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre></div></div><div class="tip custom-block"><p class="custom-block-title">高并发流量的限制（泄洪）</p><p>利用线程池技术，维护一个具有固定线程数的线程池。每次只放固定多用户访问服务，其它用户排队。另外一种实现方式就是JUC包中的信号量机制。可以有效的限制线程的进入。</p></div><div class="tip custom-block"><p class="custom-block-title">用户登录问题</p><p>做完分布式扩展之后，发现有时候已经登录过了但是系统仍然会提示去登录，后来经过查资料发现cookie和session的问题，然后通过设置cookie跨域分享以及利用redis存储token信息得以解决。</p></div><h2 id="_18-总结" tabindex="-1">18 总结 <a class="header-anchor" href="#_18-总结" aria-hidden="true">#</a></h2><h3 id="项目中redis做了什么" tabindex="-1">项目中redis做了什么 <a class="header-anchor" href="#项目中redis做了什么" aria-hidden="true">#</a></h3><ol><li>作为缓存中间件提供系统性能</li><li>预减库存，防止超卖功能实现</li><li>redis设置热点数据永不过期</li></ol><h3 id="项目中activemq都做了什么" tabindex="-1">项目中ActiveMQ都做了什么 <a class="header-anchor" href="#项目中activemq都做了什么" aria-hidden="true">#</a></h3><p>作为异步下单的中间件，利用队列排队下单缓解数据库的并发压力</p><h3 id="线程池技术中核心线程数的取值有经验值吗" tabindex="-1">线程池技术中核心线程数的取值有经验值吗 <a class="header-anchor" href="#线程池技术中核心线程数的取值有经验值吗" aria-hidden="true">#</a></h3><ul><li>CPU密集型业务：N+1</li><li>IO密集型业务：2N + 1</li></ul><h3 id="tps提升了多少" tabindex="-1">TPS提升了多少 <a class="header-anchor" href="#tps提升了多少" aria-hidden="true">#</a></h3><p>基础架构下的tps是200 经过做动静分离，nginx反向代理并做了分布式扩展，引入redis中间件后达到了2500tps。</p><h3 id="nginx的负载均衡策略" tabindex="-1">nginx的负载均衡策略 <a class="header-anchor" href="#nginx的负载均衡策略" aria-hidden="true">#</a></h3><p>轮询、权重、IP_hash、最少连接</p><h3 id="一个人同时用电脑和手机去抢购商品，会颁发几个token" tabindex="-1">一个人同时用电脑和手机去抢购商品，会颁发几个token <a class="header-anchor" href="#一个人同时用电脑和手机去抢购商品，会颁发几个token" aria-hidden="true">#</a></h3><ul><li>首先多台设备登录属于SSO问题，用户登录一端之后另外一端可以通过扫码等形式登录。虽然用户登录了多台设备，</li><li>但是用户名是一样的。为用户办理的token的相同的，我们为了一个用户只会颁发一个token。</li></ul><h3 id="如何利用线程池实现流量削峰" tabindex="-1">如何利用线程池实现流量削峰 <a class="header-anchor" href="#如何利用线程池实现流量削峰" aria-hidden="true">#</a></h3><p>设置最大线程数来限制高并发流量</p><h3 id="线程池的拒绝策略" tabindex="-1">线程池的拒绝策略 <a class="header-anchor" href="#线程池的拒绝策略" aria-hidden="true">#</a></h3><div class="language-text"><span class="copy"></span><pre><code><span class="line"><span style="color:#c9d1d9;">// 丢弃任务并抛出RejectedExceutionException异常</span></span>
<span class="line"><span style="color:#c9d1d9;">ThreadPoolExecutor.AbortPolicy</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// 丢弃任务，但是不抛出异常</span></span>
<span class="line"><span style="color:#c9d1d9;">DiscardPolicy</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// 丢弃队列最前面的任务，然后重新提交被拒绝的任务</span></span>
<span class="line"><span style="color:#c9d1d9;">DiscardOldestPolicy</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span>
<span class="line"><span style="color:#c9d1d9;">// 由调用线程（提交任务的线程）处理该任务</span></span>
<span class="line"><span style="color:#c9d1d9;">CallerRunPolicy</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre></div><h3 id="被线程池拒绝掉的那部分用户的秒杀令牌还有效吗" tabindex="-1">被线程池拒绝掉的那部分用户的秒杀令牌还有效吗 <a class="header-anchor" href="#被线程池拒绝掉的那部分用户的秒杀令牌还有效吗" aria-hidden="true">#</a></h3><p>无效，会从redis中删除</p><h3 id="线程池中阻塞队列的大小设置为多少合适" tabindex="-1">线程池中阻塞队列的大小设置为多少合适 <a class="header-anchor" href="#线程池中阻塞队列的大小设置为多少合适" aria-hidden="true">#</a></h3><p>设置为秒杀商品的个数减去核心线程数最合适</p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#8B949E;"># 项目上线之后，想看JVM的GC情况在Linux中用什么命令</span></span>
<span class="line"><span style="color:#C9D1D9;">jstat -gc vmid count</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># 表示将12538进程对应的Java进程的GC情况，每5秒打印一次</span></span>
<span class="line"><span style="color:#C9D1D9;">jstat -gc 12538 5000</span></span>
<span class="line"></span></code></pre></div><h3 id="秒杀令牌（token）每秒钟生成多少个" tabindex="-1">秒杀令牌（token）每秒钟生成多少个 <a class="header-anchor" href="#秒杀令牌（token）每秒钟生成多少个" aria-hidden="true">#</a></h3><p>跟随用户的请求会动态变化，令牌桶机制可以控制每秒生成令牌的个数</p><h3 id="能不能详细描述一下使用mq异步减redis与mysql库存的过程" tabindex="-1">能不能详细描述一下使用MQ异步减redis与MySQL库存的过程 <a class="header-anchor" href="#能不能详细描述一下使用mq异步减redis与mysql库存的过程" aria-hidden="true">#</a></h3><p>redis中库存减成功后，生成一条消息包含了商品信息、用户信息消息由MQ的生成者生产，经由queue模式发送给消费方，即订单生成的业务模块，在该模块会消费这条消息，根据其中的信息进行订单的生成，以及数据库的修改操作。</p><h3 id="做到了什么程度，库存量与并发度是多少" tabindex="-1">做到了什么程度，库存量与并发度是多少 <a class="header-anchor" href="#做到了什么程度，库存量与并发度是多少" aria-hidden="true">#</a></h3><p>TPS：单机2000</p><h3 id="mysql中的表是怎么设计的" tabindex="-1">MySQL中的表是怎么设计的 <a class="header-anchor" href="#mysql中的表是怎么设计的" aria-hidden="true">#</a></h3><p>item表、item_stock表、order表、用户信息表</p><h3 id="如何只使用mysql保证商品没有超卖" tabindex="-1">如何只使用MySQL保证商品没有超卖 <a class="header-anchor" href="#如何只使用mysql保证商品没有超卖" aria-hidden="true">#</a></h3><p>将查库存、减库存两个sql语句作为一个事务进行控制，保证每一个库存只能被一个用户消费。两条语句都执行成功进行事务提交，否则回滚，但这样会导致并发很低，但也没有办法。</p><h3 id="数据库改库存的sql" tabindex="-1">数据库改库存的SQL <a class="header-anchor" href="#数据库改库存的sql" aria-hidden="true">#</a></h3><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#C9D1D9;">update table </span><span style="color:#79C0FF;">set</span><span style="color:#C9D1D9;"> stock = stock -1 where prom_id = </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> and stock </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> 1</span><span style="color:#FF7B72;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="如何防止用户一直点击下单按钮" tabindex="-1">如何防止用户一直点击下单按钮 <a class="header-anchor" href="#如何防止用户一直点击下单按钮" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">前端限制</p><p>一次点击之后按钮置灰几秒钟</p></div><div class="tip custom-block"><p class="custom-block-title">后端限制</p><p>由于秒杀令牌的设置，用户的一个下单请求会先判断用户当前是否已经持有令牌了，因为用户全局只能获取一次令牌， 然后存入Redis缓存中。用户有令牌的话直接返回“正在抢购中”。</p></div></div></div></main><footer class="VPDocFooter" data-v-3886f8ec data-v-4fc1a8f4><div class="edit-info" data-v-4fc1a8f4><div class="edit-link" data-v-4fc1a8f4><a class="VPLink link edit-link-button" href="https://github.com/space2030?tab=repositories" target="_blank" rel="noopener noreferrer" data-v-4fc1a8f4 data-v-8dd034e6><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-4fc1a8f4><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 在 github 上编辑此页<!--]--><!----></a></div><div class="last-updated" data-v-4fc1a8f4><p class="VPLastUpdated" data-v-4fc1a8f4 data-v-537b088a>最后更新: <time datatime="2023-10-17T06:29:02.000Z" data-v-537b088a></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter" data-v-581d5782 data-v-3d0cd5b8><div class="container" data-v-3d0cd5b8><p class="message" data-v-3d0cd5b8>Released under the MIT License.</p><p class="copyright" data-v-3d0cd5b8>Copyright © 2023-present Evan You</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"f37252e3\",\"src_case_example_aqs抽象队列同步器.md\":\"24756237\",\"src_case_example_arraylist扩容机制解析.md\":\"a4b8bed3\",\"src_case_example_arrays类sort()方法使用的排序算法.md\":\"ccfbb6ab\",\"src_case_example_concurrenthashmap为什么放弃了分段锁.md\":\"0a4ffee0\",\"src_case_example_es与mysql数据不一致.md\":\"d871661c\",\"src_case_example_redis与mysql数据不一致.md\":\"26418c82\",\"src_case_example_tomcat性能优化.md\":\"dfbb266f\",\"src_case_example_中间件设计.md\":\"468e8da7\",\"src_case_example_代码片段.md\":\"925caa6b\",\"src_case_example_分布式事务解决方案.md\":\"2f070cfb\",\"src_case_example_分布式唯一id.md\":\"23eadd1f\",\"src_case_example_分布式锁-基于数据库的实现.md\":\"4d8b29d2\",\"src_case_example_分库分表.md\":\"c52281c2\",\"src_case_example_如何处理千万级别mysql数据库锁表问题.md\":\"b4c0af50\",\"src_case_example_如何快速从千万级大表删除数据.md\":\"91fe5800\",\"src_case_example_批量处理数据.md\":\"78b0d9bb\",\"src_case_example_接口性能优化.md\":\"9d1792f7\",\"src_case_example_架构设计.md\":\"d307ccb7\",\"src_case_example_百万级别数据导入导出如何优化.md\":\"98a549ab\",\"src_case_example_百万级数据深度分页如何优化.md\":\"32c9674d\",\"src_case_example_秒杀.md\":\"fcad5d18\",\"src_case_example_系统设计规范.md\":\"15c311eb\",\"src_case_example_线上环境踩坑之并行流丢失数据.md\":\"1c3be8f9\",\"src_case_example_线程池.md\":\"e4225766\",\"src_case_example_综合面.md\":\"f493e2fa\",\"src_case_example_网络.md\":\"2753f5be\",\"src_case_example_设计接口.md\":\"38f526c0\",\"src_case_example_设计模式.md\":\"47a4706e\",\"src_case_example_重构.md\":\"f8b1bb82\",\"src_case_index.md\":\"e7293aa9\",\"src_case_norm_javascript规范.md\":\"9fb24129\",\"src_case_norm_java规范.md\":\"538dd69a\",\"src_case_norm_markdown规范.md\":\"2b32c5f2\",\"src_case_norm_vue规范.md\":\"898eb012\",\"src_case_norm_前后端规约.md\":\"e89a40a3\",\"src_case_norm_接口对接规范.md\":\"6d91f32f\",\"src_case_norm_日志规范.md\":\"f59ee845\",\"src_case_redis操作.md\":\"2f51e4c7\",\"src_deploy_index.md\":\"6cb4a725\",\"src_deploy_mongodb部署.md\":\"8a227b4a\",\"src_deploy_mysql部署.md\":\"11af5f81\",\"src_deploy_node部署.md\":\"fdf9e10a\",\"src_deploy_oracle部署.md\":\"f730433a\",\"src_deploy_redis部署.md\":\"ad57b569\",\"src_git_index.md\":\"1f809b9a\",\"src_index_index.md\":\"33da6e30\",\"src_kit_blog.md\":\"1c11ac7e\",\"src_kit_index.md\":\"04dd6794\",\"src_kit_nginx.md\":\"5c165844\",\"src_kit_tool.md\":\"d4ebdde9\",\"src_view_index.md\":\"dc64bfa6\",\"src_view_java_java-01-se.md\":\"d50e6d5e\",\"src_view_java_java-02-ee.md\":\"06cece6f\",\"src_view_java_java-03-tomcat.md\":\"4e071e95\",\"src_view_java_java-04-spring.md\":\"294e3736\",\"src_view_java_java-05-mybatis.md\":\"f08a45bf\",\"src_view_java_java-06-spring-boot.md\":\"0aff5c53\",\"src_view_java_java-07-maven.md\":\"cd8805f9\",\"src_view_java_java-08-spring-cloud.md\":\"9b8482f6\",\"src_view_java_java-09-mysql.md\":\"00f74996\",\"src_view_java_java-10-redis.md\":\"07f078ba\",\"src_view_java_java-11-oracle.md\":\"333de976\",\"src_view_java_java-12-gateway.md\":\"d8b6a793\",\"src_view_java_java-13-elasticsearch.md\":\"b01a920e\",\"src_view_java_java-14-mongodb.md\":\"a29b919f\",\"src_view_java_java-15-rocketmq.md\":\"2983da5e\",\"src_view_java_java-16-activemq.md\":\"d2aa5ffd\",\"src_view_java_java-17-rabbitmq.md\":\"ed854218\",\"src_view_java_java-18-zookeeper.md\":\"2bb8ca84\",\"src_view_java_java-19-kafka.md\":\"ef7bf4c5\",\"src_view_web_web-01-html.md\":\"f76a68db\",\"src_view_web_web-02-javascript.md\":\"560f2ce1\",\"src_view_web_web-03-vue.md\":\"e6cb6cc4\",\"src_web_index.md\":\"4759f761\",\"src_web_vitepress_vitepress快速开始.md\":\"86859a47\",\"src_web_vitepress_vitepress语法规则.md\":\"e4ba6974\",\"src_web_vitepress_vitepress项目发布.md\":\"246085db\"}")</script>
    <script type="module" async src="/vitepress-deploy/assets/app.2a154df8.js"></script>
    
  </body>
</html>